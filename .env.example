# ==============================================================================
# üîê APEX-OMEGA TITAN: ENVIRONMENT CONFIGURATION TEMPLATE
# ==============================================================================
# Copy this file to .env and fill in your actual values
# Command: cp .env.example .env

# --- SECTION 1: BLOCKCHAIN ACCESS (RPC Providers) ---
# Get free API keys from Infura (https://infura.io) and Alchemy (https://alchemy.com)

# Ethereum
RPC_ETHEREUM=https://mainnet.infura.io/v3/YOUR_INFURA_PROJECT_ID
WSS_ETHEREUM=wss://mainnet.infura.io/ws/v3/YOUR_INFURA_PROJECT_ID
ALCHEMY_RPC_ETH=https://eth-mainnet.g.alchemy.com/v2/YOUR_ALCHEMY_API_KEY
ALCHEMY_WSS_ETH=wss://eth-mainnet.g.alchemy.com/v2/YOUR_ALCHEMY_API_KEY

# Polygon
RPC_POLYGON=https://polygon-mainnet.infura.io/v3/YOUR_INFURA_PROJECT_ID
POLYGON_RPC=https://polygon-mainnet.infura.io/v3/YOUR_INFURA_PROJECT_ID
WSS_POLYGON=wss://polygon-mainnet.infura.io/ws/v3/YOUR_INFURA_PROJECT_ID
ALCHEMY_RPC_POLY=https://polygon-mainnet.g.alchemy.com/v2/YOUR_ALCHEMY_API_KEY
ALCHEMY_WSS_POLY=wss://polygon-mainnet.g.alchemy.com/v2/YOUR_ALCHEMY_API_KEY
# Note: POLYGON_RPC is an alternative to RPC_POLYGON, either can be used

# Arbitrum
RPC_ARBITRUM=https://arbitrum-mainnet.infura.io/v3/YOUR_INFURA_PROJECT_ID
WSS_ARBITRUM=wss://arbitrum-mainnet.infura.io/ws/v3/YOUR_INFURA_PROJECT_ID
ALCHEMY_RPC_ARB=https://arb-mainnet.g.alchemy.com/v2/YOUR_ALCHEMY_API_KEY
ALCHEMY_WSS_ARB=wss://arb-mainnet.g.alchemy.com/v2/YOUR_ALCHEMY_API_KEY

# Optimism
RPC_OPTIMISM=https://optimism-mainnet.infura.io/v3/YOUR_INFURA_PROJECT_ID
WSS_OPTIMISM=wss://optimism-mainnet.infura.io/ws/v3/YOUR_INFURA_PROJECT_ID
ALCHEMY_RPC_OPT=https://opt-mainnet.g.alchemy.com/v2/YOUR_ALCHEMY_API_KEY
ALCHEMY_WSS_OPT=wss://opt-mainnet.g.alchemy.com/v2/YOUR_ALCHEMY_API_KEY

# Base
RPC_BASE=https://base-mainnet.g.alchemy.com/v2/YOUR_ALCHEMY_API_KEY
WSS_BASE=wss://base-mainnet.g.alchemy.com/v2/YOUR_ALCHEMY_API_KEY

# Binance Smart Chain
RPC_BSC=https://bsc-dataseed.binance.org
WSS_BSC=wss://bsc-ws-node.nariox.org:443

# Avalanche
RPC_AVALANCHE=https://api.avax.network/ext/bc/C/rpc
WSS_AVALANCHE=wss://api.avax.network/ext/bc/C/ws

# Fantom
RPC_FANTOM=https://rpc.ftm.tools
WSS_FANTOM=wss://wsapi.fantom.network

# Linea
RPC_LINEA=https://rpc.linea.build
WSS_LINEA=wss://rpc.linea.build

# Scroll
RPC_SCROLL=https://rpc.scroll.io
WSS_SCROLL=wss://wss-rpc.scroll.io

# Mantle
RPC_MANTLE=https://rpc.mantle.xyz
WSS_MANTLE=wss://ws.mantle.xyz

# ZKsync Era
RPC_ZKSYNC=https://mainnet.era.zksync.io
WSS_ZKSYNC=wss://mainnet.era.zksync.io/ws

# Blast
RPC_BLAST=https://rpc.blast.io
WSS_BLAST=wss://rpc.blast.io

# Celo
RPC_CELO=https://forno.celo.org
WSS_CELO=wss://forno.celo.org/ws

# opBNB
RPC_OPBNB=https://opbnb-mainnet-rpc.bnbchain.org
WSS_OPBNB=wss://opbnb-mainnet-rpc.bnbchain.org

# --- SECTION 2: WALLET CONFIGURATION ---
# ‚ö†Ô∏è  SECURITY WARNING: Never commit this file with real keys to git!
# Use a dedicated wallet for bot operations with limited funds
# Replace with your actual private key (64 hex characters after 0x)

PRIVATE_KEY=YOUR_PRIVATE_KEY_HERE_64_HEX_CHARACTERS

# --- SECTION 3: DEPLOYED CONTRACT ADDRESSES ---
# Deploy with: npx hardhat run scripts/deploy.js --network <network>

EXECUTOR_ADDRESS_ETHEREUM=
EXECUTOR_ADDRESS_POLYGON=
EXECUTOR_ADDRESS_ARBITRUM=
EXECUTOR_ADDRESS_OPTIMISM=
EXECUTOR_ADDRESS_BASE=
EXECUTOR_ADDRESS_BSC=
EXECUTOR_ADDRESS_AVALANCHE=

# --- SECTION 4: EXTERNAL API KEYS ---

# Li.Fi - Cross-chain bridge aggregation (KEEP - Already excellent)
# Get free key: https://li.fi/
LIFI_API_KEY=

# CoinGecko - Token price feeds (RECOMMENDED)
# Get free key: https://www.coingecko.com/en/api
# Used by enhanced chainlink_oracle_feeds module as fallback for price data
# Multi-tier price fallback: Chainlink (on-chain) ‚Üí CoinGecko ‚Üí Binance
COINGECKO_API_KEY=

# Oracle API Timeout Configuration (optional)
# Timeout for external API calls to price oracles (in seconds)
# Default: 5 seconds
ORACLE_API_TIMEOUT=5

# === DEX AGGREGATOR API KEYS ===

# 1inch - Fast single-chain arbitrage (CRITICAL)
# Get key: https://portal.1inch.dev/
ONEINCH_API_KEY=
ONEINCH_REFERRER_ADDRESS=0xYourAddress

# 0x/Matcha - Multi-chain routing and limit orders (HIGH)
# Get key: https://0x.org/docs/introduction/getting-started
ZEROX_API_KEY=

# Jupiter - Solana ecosystem (MEDIUM)
# Requires Solana RPC and wallet
SOLANA_RPC_URL=https://api.mainnet-beta.solana.com
SOLANA_WALLET_PRIVATE_KEY=

# CoW Swap - MEV protection for high-value trades (HIGH)
# No API key needed, just app code
COWSWAP_APP_CODE=titan-arbitrage

# CoW Swap Fill System Configuration
# COWSWAP_PARTIALLY_FILLABLE: Allow partial order fills for CoW Swap trades
# When true: Orders can be partially filled if full liquidity is not available
#            This improves execution rate but may result in partial position fills
# When false: Orders must be filled completely or not at all (recommended for live trading with real money)
# Default: false (safer for live execution with real money risk)
# IMPORTANT: For LIVE mode with real money, keep this false to ensure atomic execution
COWSWAP_PARTIALLY_FILLABLE=false

# Rango - Cross-chain aggregation (70+ chains) (HIGH)
# Get key: https://docs.rango.exchange/
RANGO_API_KEY=

# OpenOcean - Multi-chain price discovery (MEDIUM)
# Get key: https://docs.openocean.finance/
OPENOCEAN_API_KEY=

# KyberSwap - Multi-chain with rewards (MEDIUM)
# No API key needed, just client ID
KYBERSWAP_CLIENT_ID=titan-bot

# Aggregator Strategy Configuration
AGGREGATOR_PREFERENCE=auto
ENABLE_PARALLEL_QUOTES=true
MIN_QUOTE_COMPARISON_COUNT=3
PARALLEL_QUOTE_TIMEOUT=5000
HIGH_VALUE_THRESHOLD_USD=1000
COWSWAP_MIN_VALUE_USD=1000

# Block Explorers - Contract verification (OPTIONAL)
ETHERSCAN_API_KEY=
POLYGONSCAN_API_KEY=
ARBISCAN_API_KEY=
OPTIMISTIC_ETHERSCAN_API_KEY=
BASESCAN_API_KEY=
BSCSCAN_API_KEY=
SNOWTRACE_API_KEY=

# BloxRoute - MEV protection (OPTIONAL)
BLOXROUTE_AUTH=

# Moralis - Blockchain data indexing (OPTIONAL)
MORALIS_API_KEY=

# --- SECTION 5: REDIS CONFIGURATION ---
# Default: local Redis instance

REDIS_URL=redis://localhost:6379
REDIS_DB=0

# For remote Redis:
# REDIS_URL=redis://username:password@hostname:port

# --- SECTION 6: STRATEGY PARAMETERS ---

# Minimum profit threshold in USD
MIN_PROFIT_USD=5.00

# Minimum profit margin in basis points (10 = 0.1%)
MIN_PROFIT_BPS=10

# Maximum acceptable slippage in basis points (50 = 0.5%)
MAX_SLIPPAGE_BPS=50

# Maximum number of concurrent transactions
MAX_CONCURRENT_TXS=3

# Gas price limits (in gwei)
MAX_PRIORITY_FEE_GWEI=50
MAX_BASE_FEE_GWEI=200

# Gas limit safety multiplier
GAS_LIMIT_MULTIPLIER=1.2

# Flash loan preference (1=Balancer, 2=Aave)
FLASH_LOAN_PROVIDER=1

# ETH price in USD (for gas cost calculations)
# Update this periodically or use a price oracle integration
ETH_PRICE_USD=2000

# Python executable (for trade database)
# Defaults to python3, set to python or full path if needed
PYTHON_EXECUTABLE=python3

# --- SECTION 7: SYSTEM CONFIGURATION ---

# Execution Mode Configuration
# EXECUTION_MODE options:
#   PAPER - Paper trading on mainnet (real data, simulated execution)
#   LIVE  - Live trading on mainnet (real data, real execution)
EXECUTION_MODE=PAPER

# Real Data Pipeline Configuration
# USE_REAL_DATA: Enable real DEX data fetching via WebSockets and direct queries
# When disabled, uses simulated data for testing
USE_REAL_DATA=true
USE_WEBSOCKETS=true
REAL_DATA_POLLING_INTERVAL=5

# Rust Engine Configuration
# ENABLE_RUST_ENGINE: Use Rust HTTP server for performance-critical operations
# RUST_SERVER_PORT: Port for Rust HTTP server
ENABLE_RUST_ENGINE=true
RUST_SERVER_PORT=3000

# ML Model Configuration
# ENABLE_ML_MODELS: Enable machine learning models (forecaster, RL agent)
# ML_MODELS_TRAINED: Set to true after training models with train_ml_models.py
ENABLE_ML_MODELS=true
ML_MODELS_TRAINED=false
ML_AUTO_RETRAIN=false

# ===================== AI & SCORING ===============================
# TAR Scoring System - Token Analysis & Risk scoring for opportunity evaluation
TAR_SCORING_ENABLED=true

# AI Prediction System - Use AI models for market prediction
AI_PREDICTION_ENABLED=true
AI_PREDICTION_MIN_CONFIDENCE=0.8

# CatBoost Model - Gradient boosting model for classification/regression
CATBOOST_MODEL_ENABLED=true

# Confidence Thresholds - Minimum confidence levels for different models
HF_CONFIDENCE_THRESHOLD=0.8           # Hugging Face model confidence threshold
ML_CONFIDENCE_THRESHOLD=0.75          # General ML model confidence threshold
PUMP_PROBABILITY_THRESHOLD=0.2        # Pump detection probability threshold

# Self-Learning & Intelligence Features
SELF_LEARNING_ENABLED=true            # Enable continuous model improvement
ROUTE_INTELLIGENCE_ENABLED=true       # Enable intelligent route optimization
REAL_TIME_DATA_ENABLED=true           # Enable real-time data processing

# Enable/disable features
ENABLE_CROSS_CHAIN=true
ENABLE_MEV_PROTECTION=false
ENABLE_SIMULATION=true
ENABLE_REALTIME_TRAINING=true

# Logging level (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# API server port (for ml/onnx_prediction_api.py)
API_PORT=8000

# --- SECTION 8: ADVANCED OPTIONS ---

# Circuit breaker settings
MAX_CONSECUTIVE_FAILURES=10
CIRCUIT_BREAKER_COOLDOWN=60

# Rate limiting
MAX_REQUESTS_PER_MINUTE=100

# Cache TTL in seconds
CACHE_TTL=300

# Block confirmation requirements
CONFIRMATION_BLOCKS=2

# Price query block selection (latest, pending, or specific block number)
# Use 'latest' for most accurate prices but slower during congestion
# Use 'pending' for faster queries (includes pending transactions)
# Leave empty for default behavior (uses last finalized block)
PRICE_QUERY_BLOCK_IDENTIFIER=latest

# --- SECTION 9: MEV & OPTIMIZATION FEATURES (NEW) ---

# Gas Strategy Options
# GAS_STRATEGY options: ADAPTIVE (default), FAST, SAFE
# ADAPTIVE: Adjusts based on profit margin
# FAST: Higher gas for better execution (use when margin >50%)
# SAFE: Lower gas to minimize cost (use when margin <10%)
GAS_STRATEGY=ADAPTIVE

# MEV Strategy Gas Multipliers
MEV_GAS_MULTIPLIER=1.5                # Gas multiplier for MEV strategies (1.5 = 50% higher)

# Cross-DEX Order Splitting
MIN_SPLIT_SIZE_USD=10000              # Minimum trade size to warrant splitting
MAX_ORDER_SPLITS=5                    # Maximum number of DEX splits per trade

# JIT (Just-In-Time) Liquidity
ENABLE_JIT_LIQUIDITY=false            # Enable JIT liquidity provisioning
MIN_JIT_PROFIT_USD=30.00              # Minimum profit for JIT opportunity

# MEV Bundle Settings
VALIDATOR_TIP_PERCENTAGE=90           # Percentage of MEV profit to give validator (90% recommended)

# --- SECTION 10: FLASH ARB EXECUTOR CONFIGURATION ---

# FlashArbExecutor Contract Addresses (deployed per chain)
# Deploy with: npx hardhat run scripts/deployFlashArbExecutor.js --network <network>
FLASH_ARB_EXECUTOR_POLYGON=
FLASH_ARB_EXECUTOR_ETHEREUM=
FLASH_ARB_EXECUTOR_ARBITRUM=
FLASH_ARB_EXECUTOR_OPTIMISM=
FLASH_ARB_EXECUTOR_BASE=
FLASH_ARB_EXECUTOR_BSC=

# Arbitrage Engine Executors (Polygon-specific)
# HFT Contract: Optimized for direct pair swaps, bypasses routers for flash loans
HFT_CONTRACT_ADDRESS=0xAF54D81835F811F1D4aB35c5856DDAE8834cdDA2
# Router Contract: Supports multi-hop paths, uses routers for flash loans
ROUTER_CONTRACT_ADDRESS=0x4442782681b668365334C3D2A6F004F0760DA393

# Flash Loan Provider Configuration
# CRITICAL: Flash loans MUST be enabled for zero-capital operation
# This system is designed to work with ZERO working capital (only gas fees)
# Provider IDs: 1=Balancer, 2=Aave
FLASH_LOAN_PROVIDER=1

# FLASH_LOAN_ENABLED must ALWAYS be true for production use
# Setting this to false will cause the bot to exit immediately
# The system requires 100% flash-funded execution
# CRITICAL: This is mandatory - DO NOT disable
FLASH_LOAN_ENABLED=true

# Enforce simulation before LIVE execution (mandatory for safety)
# When true, all LIVE trades must pass simulation before execution
# CRITICAL: Keep enabled for mainnet to prevent failed transactions
ENFORCE_SIMULATION=true

# Minimum Profit Configuration (in Wei for native token)
# Polygon: 5 MATIC = 5000000000000000000 Wei
# Ethereum: 0.002 ETH = 2000000000000000 Wei
MIN_PROFIT_WEI_POLYGON=5000000000000000000
MIN_PROFIT_WEI_ETHEREUM=2000000000000000
MIN_PROFIT_WEI_ARBITRUM=2000000000000000
MIN_PROFIT_WEI_OPTIMISM=2000000000000000
MIN_PROFIT_WEI_BASE=2000000000000000

# DEX Router IDs (for FlashArbExecutor)
# 1=QuickSwap, 2=SushiSwap, 3=UniswapV3
DEX_QUICKSWAP_ID=1
DEX_SUSHISWAP_ID=2
DEX_UNISWAPV3_ID=3

# Flash Loan Execution Settings
# CRITICAL: These settings ensure 100% flash-funded execution
# Flash loans allow borrowing large amounts without collateral within a single transaction
# This enables arbitrage with ZERO working capital (only gas fees needed)
FLASH_LOAN_ENABLED=true
FLASH_LOAN_MAX_AMOUNT_USD=1000000
FLASH_LOAN_SAFETY_MARGIN=1.5

# WARNING: Do NOT set FLASH_LOAN_ENABLED=false
# The entire system is architected for flash-funded execution
# Disabling flash loans will cause the bot to exit immediately

# --- ADVANCED FEATURES CONFIGURATION (NEW) ---
# Private Relay Integration (Flashbots, BloxRoute, MEV Blocker)
USE_PRIVATE_RELAY=true
PRIVATE_RELAY_MIN_VALUE=50
FLASHBOTS_AUTH_KEY=

# MEV Detection and Protection
USE_MEV_DETECTION=true
MEV_MIN_SAFETY_SCORE=70

# Custom RPC Endpoints (Tier 1 - Co-located Nodes)
CUSTOM_RPC_ETHEREUM=
CUSTOM_WSS_ETHEREUM=
CUSTOM_RPC_POLYGON=
CUSTOM_WSS_POLYGON=
CUSTOM_RPC_ARBITRUM=
CUSTOM_WSS_ARBITRUM=
CUSTOM_RPC_OPTIMISM=
CUSTOM_WSS_OPTIMISM=
CUSTOM_RPC_BASE=
CUSTOM_WSS_BASE=
CUSTOM_RPC_BSC=
CUSTOM_WSS_BSC=

# API Keys for Additional Services
ALCHEMY_API_KEY=YOUR_ALCHEMY_API_KEY
INFURA_API_KEY=YOUR_INFURA_API_KEY

